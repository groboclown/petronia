---
schema-version: v1

name: petronia.core.api.native.notification
version: [1, 0, 0]
type: api

about: The System Notifications
description: >
  Maintains information about the native system's notification area.  For X11, the desktop standard
  (https://specifications.freedesktop.org/systemtray-spec/systemtray-spec-0.2.html#ftn.idm45066890824304) calls
  this the "system tray", and Windows notify icon
  (https://docs.microsoft.com/en-us/windows/win32/api/shellapi/nf-shellapi-shell_notifyiconw).  These can be
  both text messages and the status icons.
licenses:
  - MIT
authors:
  - Petronia Project
depends: []
default:
  name: petronia.core.impl.native
  minimum: [1, 0, 0]



state-data:

  notification-icons:
    description: >
      Describes the different status notifications that are represented as icons.
    fields:
      icons:
        type: array
        min-length: 0
        max-length: 1000
        value-type:
          type: reference
          ref: notification-icon


events:

  notification-text-created:
    description: >
      A short-term notification text alert is displayed.  This only tells listeners that one was requested to
      show; it does not tell listeners when it is removed.  Depending on the system configuration, this may either
      be an indication that the underlying native system has created the text, or that another extension needs
      to perform an action.
    priority: user
    send-access: implementations
    receive-access: public
    fields:
      text:
        description: >
          Full text for the notification.
        type: reference
        ref: localizable-message
      title:
        description: >
          Header for the notification.
        type: reference
        ref: localizable-message
      icon_id:
        description: >
          Identifier for the icon to associate with the message.
        type: reference
        ref: event-target-id
      sound_id:
        description: >
          Identifier for the audio to play with the message.
        type: reference
        ref: event-target-id


references:
  # =========================================================================
  # Standard Types
  event-target-id:
    description: ID of an event listener.
    type: string
    min-length: 5
    max-length: 600
  localizable-message:
    description: A localizable message for user display.
    type: structure
    fields:
      catalog:
        description: >
          The name of the translation file, or "domain", that contains
          the translations.
        type: string
        min-length: 2
        max-length: 300
      message:
        description: >
          The message ID to look up in the catalog.  If the message
          has no translation, this is directly displayed to the user.
        type: string
        min-length: 1
        max-length: 10000
      arguments:
        description: >
          List of arguments to be inserted into the translated message.
          Each argument should have a distinct name from all the other
          arguments in this message; the name is how the message references
          the arguments.
        type: array
        min-length: 0
        max-length: 100
        optional: true
        value-type:
          type: reference
          ref: message-argument
  message-argument:
    description: An argument to be inserted into the localizable message.
    type: structure
    fields:
      name:
        description: Name of the arugment, referenced by the message.
        type: string
        min-length: 1
        max-length: 50
      value:
        description: Value of the argument.  It must be a simple type.
        type: reference
        ref: message-argument-value
  message-argument-value:
    description: A replacement value for a named argument in the message.
    type: selector
    type-mapping:
      string:
        type: string
        min-length: 0
        max-length: 10000
      int:
        type: int
      float:
        type: float
      bool:
        type: bool
      datetime:
        type: datetime
      string_list:
        type: array
        min-length: 0
        max-length: 100
        value-type:
          type: string
          min-length: 0
          max-length: 10000
      int_list:
        type: array
        min-length: 0
        max-length: 100
        value-type:
          type: int
      float_list:
        type: array
        min-length: 0
        max-length: 100
        value-type:
          type: float
      bool_list:
        type: array
        min-length: 0
        max-length: 100
        value-type:
          type: bool
      datetime_list:
        type: array
        min-length: 0
        max-length: 100
        value-type:
          type: datetime

  # =========================================================================
  # Custom Types

  notification-icon:
    description: >
      A single notification icon.
    type: object
    fields:
      icon_id:
        description: >
          The id of the notification icon.  Used for interacting with the icon.
        type: reference
        ref: event-target-id
      image_id:
        description: >
          The ID of the image which can be pulled in an explicit call.  If not set, then the application did not
          provide an icon.
        optional: true
        type: reference
        ref: event-target-id
      title:
        description: >
          The title or name for the icon.
        type: reference
        ref: localizable-message
      hint:
        description: >
          A descriptive "hint" or "tip", usually displayed on a mouse-over.
        type: reference
        ref: localizable-message
